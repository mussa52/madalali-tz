<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Users - Admin</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="dashboard">
        <aside class="sidebar">
            <div style="padding: 0 1.5rem; margin-bottom: 2rem;">
                <h3 style="color: white;">Admin Panel</h3>
            </div>
            <ul class="sidebar-menu">
                <li><a href="/admin/dashboard.html">ğŸ“Š Dashboard</a></li>
                <li><a href="/admin/users.html" class="active">ğŸ‘¥ Manage Users</a></li>
                <li><a href="/admin/properties.html">ğŸ  Manage Properties</a></li>
                <li><a href="/admin/inquiries.html">ğŸ’¬ Inquiries</a></li>
                <li><a href="#" class="logout-btn">ğŸšª Logout</a></li>
            </ul>
        </aside>
        <main class="main-content">
            <div class="container-fluid">
                <h1>Manage Users</h1>
                <div id="alertContainer"></div>
                <div class="card">
                    <div class="card-body">
                        <div id="usersTableContainer">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="/js/app.js"></script>
    <script>
        if (!Auth.requireAuth(['admin'])) throw new Error('Auth required');
        async function loadUsers() {
            try {
                const response = await API.request('/users');
                if (response.success) {
                    const users = response.data.users || response.data;
                    let html = `<table class='table'><thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Status</th></tr></thead><tbody>`;
                    html += users.map(user => `<tr><td>${user.name}</td><td>${user.email}</td><td>${user.role}</td><td>${user.status}</td></tr>`).join('');
                    html += '</tbody></table>';
                    document.getElementById('usersTableContainer').innerHTML = html;
                } else {
                    document.getElementById('usersTableContainer').innerHTML = '<p class="text-danger">Failed to load users.</p>';
                }
            } catch (err) {
                document.getElementById('usersTableContainer').innerHTML = `<p class='text-danger'>${err.message}</p>`;
            }
        }
        loadUsers();
    </script>
</body>
</html>
